/* eslint-disable jsx-a11y/anchor-is-valid */

import React, { useEffect, useState } from "react";
import { useParams } from "react-router-dom";
// import styled from 'styled-components';


//ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©ë²• ë¬¸ë²•ìœ¼ë¡œ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ê³ , props ë¬¸ë²•ì„ ì´ìš©í•˜ì—¬,
//í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ í”„ë¡œê·¸ë˜ë° ì ì¸ ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.
// let YelloBtn = styled.button`
//     background-color: ${props => props.bg};
//     color: ${props => props.bg == 'orange' ? "white" : "black"};
//     padding: 10px;
//     `

/* 
ì»´í¬ë„ŒíŠ¸ì˜ Lifecycle
Detail ì»´í¬ë„ŒíŠ¸ê°€ ë³´ì´ëŠ” ìˆœê°„ì„ í˜ì´ì§€ì— ì¥ì°©ëœë‹¤ê³  í‘œí˜„í•œë‹¤(mount)
ì—…ë°ì´íŠ¸ê°€ ë˜ê¸°ë„ í•˜ê³ (update), í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤ë©´ ì œê±°ëœë‹¤(unmount)
ì»´í¬ë„ŒíŠ¸ì˜ updateëŠ” ì¬ ë Œë”ë§ì„ ì˜ë¯¸í•œë‹¤.
*/

/* 
useEffectì¸ ì´ìœ ëŠ” sideEffectë¼ëŠ” ë‹¨ì–´ì¸ í•¨ìˆ˜ì˜ í•µì‹¬ê¸°ëŠ¥ê³¼ ìƒê´€ì—†ëŠ” ë¶€ê°€ê¸°ëŠ¥ì„ ì˜ë¯¸í•˜ëŠ”ë°, ê·¸ ë‹¨ì–´ì—ì„œ ìœ ë˜ë¨
//í•µì‹¬ html ê¸°ëŠ¥ì´ ì•„ë‹Œ sideEffectë¼ëŠ” ì˜ë¯¸ë¡œ ë³´ë©´ëœë‹¤.

ì—¬ê¸° ì•ˆì— ì ì€ ì½”ë“œëŠ” Detail ì»´í¬ë„ŒíŠ¸ê°€ mount, update ì‹œ ì‹¤í–‰ëœë‹¤!    
useEffect ë°–ì— console.log('ì•ˆë…•') ì´ë¼ê³  ì…ë ¥í•´ë„, mount, update ë  ë•Œ ì½˜ì†”ì°½ì— ì¶œë ¥ëœë‹¤.
useEffectê°€ í•„ìš”í•œ ì´ìœ ëŠ” useEffectì˜ ê°„ë‹¨í•œ ë™ì‘ì›ë¦¬ëŠ” ì‹¤í–‰ ì‹œì ì´ ì•½ê°„ ë‹¤ë¥¸ë°, useEffectì•ˆì— ì íŒ ì½”ë“œëŠ”
ë Œë”ë§ì´ ì™„ë£Œëœ í›„ì— ë™ì‘í•œë‹¤. (html ì½”ë“œê°€ ì „ë¶€ ë¡œë”©ì´ ëœ í›„)

ê°€ì •ë²• - ë³µì¡í•œ ì—°ì‚°ë¬¸(ì˜ˆë¥¼ ë“¤ë©´ for ë°˜ë³µë¬¸ì„ 100ë²ˆì´ìƒ ëŒë¦°ë‹¤ëŠ” ê°€ì •)ì˜ ì—°ì‚°ì´ ì‹œê°„ì´ ê±¸ë¦°ë‹¤ë©´,
         í•´ë‹¹ ë°˜ë³µë¬¸ì´ ì‹¤í–‰ì´ ì™„ë£Œëœ í›„ì— htmlì´ ì‹¤í–‰ë í…ë°, useEffectì•ˆì— í•¨ìˆ˜ë¥¼ ë„£ëŠ”ë‹¤ë©´, htmlíƒœê·¸ê°€ ì „ë¶€ ë Œë”ë§ ëœ í›„ì—
         ì—°ì‚°ë¬¸ì´ ì‹¤í–‰ëœë‹¤. -> ì‰¬ìš´ ì‘ì—…ì„ ë¨¼ì € ë³´ì—¬ì¤€ í›„, ì–´ë ¤ìš´ ì‘ì—…ì„ ì‹¤í–‰ì‹œí‚¤ë„ë¡ í•  ìˆ˜ ìˆë‹¤.
         
useEffectì•ˆì— ì ëŠ” ì½”ë“œ
- ì–´ë ¤ìš´ ì—°ì‚°ì‘ì—…
- ì„œë²„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” ì‘ì—…
- íƒ€ì´ë¨¸ê°€ ë¶™ê²Œë˜ëŠ” í•¨ìˆ˜ë“¤
*/

function Diary(props) {

    let [count, setCount] = useState(0);
    let [isShow, setIsShow] = useState(false);

    //useEffectê°€ ë§ì´ ì´ìš©ë˜ëŠ” ê²½ìš°ëŠ”, ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ìš”ì²­í• ë•Œ ì‚¬ìš©ë˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ë°ì´í„° ìš”ì²­ì´ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ì‘ì—…ì¼ ì‹œ, ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë„ì¤‘ì— ë Œë”ë§ì´ ì´ë£¨ì–´ì§„ë‹¤ë©´, ìš”ì²­ ì‹œê°„ ì‚¬ì´ì— ìš”ì²­ì´ ë°˜ë³µì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê²Œ ë˜ëŠ”ë°, ë²„ê·¸ê°€ ìƒê¸¸ í™•ë¥ ì´ ë†’ì•„ì§„ë‹¤.
    //ê·¸ëŸ´ ë•Œ return í•¨ìˆ˜ì— ê¸°ì¡´ ë°ì´í„° ìš”ì²­ì€ ì œê±°í•´ë‹¬ë¼ëŠ” ë¬¸ë²•ì„ ì‘ì„±í•´ë‘ë©´ ê¸°ì¡´ ìš”ì²­ê³¼ ì¶©ëŒì´ ëœí•´ì§ˆ ìˆ˜ ìˆë‹¤.

    useEffect(() => {
        let timer = setTimeout(() => { setIsShow(true) }, 2000)
        console.log('countê°€ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰ëœë‹¤.')

        return () => {
            console.log('cleanupFnì´ ê³¼ì—° ë¨¼ì € ë™ì‘í• ê¹Œ?')
            clearTimeout(timer);
        }
    })

    /* 
           
   useEffectë¥¼ ì“¸ ë•Œ, ë§¨ ë§ˆì§€ë§‰ ê´„í˜¸ë¥¼ ë‹«ì„ ë•Œ, []ë¥¼ ì¶”ê°€í•´ì£¼ëŠ” ê²Œ ë” ì •í™•í•œ ì½”ë“œê°€ ëœë‹¤. 
   []ì€ ì‹¤í–‰ì¡°ê±´ì„ ë„£ì„ ìˆ˜ ìˆëŠ” ê³³ì„ ì˜ë¯¸í•˜ê³ , dependencyë¼ê³  ì§€ì¹­í•œë‹¤. ex) [count, isShow] ë“±ìœ¼ë¡œ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.
   dependency ê°€ ì—†ë‹¤ë©´ mountë‚˜ í˜ì´ì§€ê°€ update ë  ë•Œ ì‹¤í–‰ë˜ê³ , [count] ë¼ëŠ” ë³€ìˆ˜ë¡œ ì‘ì„±ì„ í•œë‹¤ë©´ countì˜ ê°’ì´ ë³€í•  ë•Œ ì‹¤í–‰ë˜ë„ë¡ë™ì‘ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤.
       
   useEffect ë¬¸ë²•ì— returnì„ ì¶”ê°€í•  ìˆ˜ê°€ ìˆëŠ”ë°, return () => { ì½”ë“œ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.} 
   ì´ì™€ ê°™ì€ functionì€ clean up functionì´ë¼ê³  í•˜ëŠ”ë°, useEffectê°€ ë™ì‘í•˜ê¸° ì „ì— ì‹¤í–‰ë˜ëŠ” êµ¬ë¬¸ì´ë‹¤. 
   ì˜ˆë¥¼ ë“¤ë©´ ìœ„ ì²˜ëŸ¼ timerí•¨ìˆ˜ë¥¼ ë§Œë“¤ë©´, react íŠ¹ì„± ìƒ ì¬ ë Œë”ë§ì´ ìì£¼ ì¼ì–´ë‚˜ëŠ”ë° , íƒ€ì´ë¨¸ê°€ ì˜ˆìƒì¹˜ ëª»í•˜ê²Œ ë§ì´ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë°, ê·¸ëŸ° ìƒí™©ì¼ ë•Œ, return í•¨ìˆ˜ì— ê¸°ì¡´ íƒ€ì´ë¨¸ë¥¼ ì œê±°í•´ë‹¬ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ë©´ ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.
   
       
       */




    let { id } = useParams();
    let findItem = props.item.find((x) => x.id == id)


    return (
        <>
            <div className="container">
                {
                    isShow === true ? null : <div className="alert alert-warning">
                        2ì´ˆì´ë‚´ êµ¬ë§¤ ì‹œ í• ì¸
                    </div>
                }
                <button onClick={() => setCount(count + 1)}><span>ğŸ‘</span></button>{count}
                <div className="row">
                    <div className="col-md-6">
                        <img src={process.env.PUBLIC_URL + `/travel_${props.item[id].id}.jpg`} alt="img" width="100%" />
                    </div>
                    <div className="col-md-6">
                        <h4 className="pt-5">{findItem.title}</h4>
                        <p>{findItem.content}</p>
                        <p>{findItem.price}</p>
                        <button className="btn btn-danger">ì¶”ê°€í•˜ê¸°</button>
                    </div>
                </div>
            </div>
        </>
    )
}

export default Diary;

//ìˆ™ì œ Detail í˜ì´ì§€ ë°©ë¬¸ í›„ 2ì´ˆ ì§€ë‚˜ë©´ div ìˆ¨ê¸°ê¸°